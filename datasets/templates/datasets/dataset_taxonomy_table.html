{% load general_templatetags %}
<table id="dataset_contents" class="ui unstackable table" width="100%">
    <thead>
        <tr>
            <th>Class</th>
            <th># sounds samples</th>
            <th title="annotations that have been validated by several users, until reaching agreement on the presence of the sound class"># ground truth annotations</th>
            <th title="number of contributions or validations made by users"># votes</th>
            <th title="quality of the initial mapping from Freesound to AudioSet, expressing the proportion of correct candidate annotations">Quality estimate</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
    {% for node in dataset_taxonomy_stats.nodes_data %}
        <tr {% if node.is_omitted %}class="negative"{% endif %}>
            <td>{{ node.name }}</td>
            <td>{{ node.num_sounds }}</td>
            <td title="annotations that have been validated by several users, until reaching agreement on the presence of the sound class">{{ node.num_ground_truth }}</td>
            <td title="number of contributions or validations made by users">{{ node.num_user_contributions }}</td>
            <td title="quality of the initial mapping from Freesound to AudioSet, expressing the proportion of correct candidate annotations">{% if node.votes_stats.quality_estimate %}{{ node.votes_stats.quality_estimate|floatformat:2 }}%{% else %}-{% endif %}</td>
            <td class="right aligned"><a href="{% url category_link_to.0 dataset.short_name node.url_id %}" class="blue ui button right labeled icon">{{ category_link_to.1 }} <i class="right arrow icon"></i></a></td>
        </tr>
    {% endfor %}
    </tbody>
</table>
<div class="ui grid">
    <div class="right aligned column">
        <span class="small_gray_text">Data last updated {{ dataset_taxonomy_stats.redis_timestamp | timestamp_to_datetime | timesince  }} ago</span>
    </div>
</div>
